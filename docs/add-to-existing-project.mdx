---
title: "Add to Existing Project"
description: "Integrate sunpeak into your existing React application."
---

## Overview

If you already have a React project and want to use sunpeak for runtime APIs or testing,
you can integrate the sunpeak library directly without using the framework.

<Info>
**Starting from scratch?** Use [Quickstart](/quickstart) for the recommended MCP App creation experience.
</Info>

## Prerequisites

Your existing project needs:

<CardGroup cols={3}>
  <Card horizontal title="React" icon="react">
    Version 19
  </Card>
  <Card horizontal title="Node.js" icon="node-js">
    Version 20 or higher
  </Card>
  <Card horizontal title="Build Tool" icon="wrench">
    Vite recommended
  </Card>
</CardGroup>

## Installation Steps

<Steps>
  <Step title="Install sunpeak">
    Add sunpeak to your project dependencies:

    <Tabs>
      <Tab title="pnpm">
        ```bash
        pnpm add sunpeak
        ```
      </Tab>
      <Tab title="npm">
        ```bash
        npm install sunpeak
        ```
      </Tab>
      <Tab title="yarn">
        ```bash
        yarn add sunpeak
        ```
      </Tab>
    </Tabs>

    If you only want to use sunpeak simulation and testing functionality (without the runtime APIs),
    you can add sunpeak to `devDependencies` instead.
  </Step>

  <Step title="Install styles (Tailwind)">
    sunpeak requires Tailwind CSS 4. If you don't have it installed:

    <Tabs>
      <Tab title="pnpm">
        ```bash
        pnpm add -D tailwindcss@next @tailwindcss/vite@next
        ```
      </Tab>
      <Tab title="npm">
        ```bash
        npm install --save-dev tailwindcss@next @tailwindcss/vite@next
        ```
      </Tab>
      <Tab title="yarn">
        ```bash
        yarn add -D tailwindcss@next @tailwindcss/vite@next
        ```
      </Tab>
    </Tabs>

    Configure Tailwind in your build config, if it isn't set up already:

    <Tabs>
      <Tab title="Vite">
        ```ts
        // vite.config.ts
        import { defineConfig } from 'vite';
        import react from '@vitejs/plugin-react';
        import tailwindcss from '@tailwindcss/vite';

        export default defineConfig({
          plugins: [react(), tailwindcss()],
        });
        ```
      </Tab>
      <Tab title="Webpack">
        ```js
        // webpack.config.js
        module.exports = {
          module: {
            rules: [
              {
                test: /\.css$/,
                use: ['style-loader', 'css-loader', 'postcss-loader'],
              },
            ],
          },
        };
        ```

        ```js
        // postcss.config.js
        module.exports = {
          plugins: {
            tailwindcss: {},
            autoprefixer: {},
          },
        };
        ```
      </Tab>
    </Tabs>

    Import Tailwind and sunpeak styles in your CSS entrypoint:

    ```css
    @import "tailwindcss";
    @import "sunpeak/style.css";

    /* Scan source files for Tailwind classes */
    @source "./**/*.{ts,tsx}";

    /* Configure dark mode to use data-theme attribute */
    @custom-variant dark (&:where([data-theme="dark"], [data-theme="dark"] *));
```
  </Step>

  <Step title="Create resource and simulation files">
    Create a resource folder with a `.tsx` file that exports both the metadata and the React component:

    ```tsx
    // src/resources/example/example-resource.tsx
    import type { ResourceConfig } from 'sunpeak';

    export const resource: ResourceConfig = {
      name: 'example',
      title: 'Example',
      description: 'My example component',
      mimeType: 'text/html;profile=mcp-app',
      _meta: {
        ui: {
          domain: 'https://example.com',
          csp: {
            resourceDomains: [],
            connectDomains: [],
          },
        },
      },
    };

    export function ExampleResource() {
      return <div>Hello from Example!</div>;
    }
    ```

    Create a simulation JSON file in `tests/simulations/`:

    ```json
    // tests/simulations/example/example-show-simulation.json
    {
      "userMessage": "Show me an example",
      "tool": {
        "name": "show-example",
        "description": "Show an example app",
        "inputSchema": { "type": "object", "properties": {}, "additionalProperties": false },
        "title": "Show Example",
        "annotations": { "readOnlyHint": true },
        "_meta": {
          "ui": { "visibility": ["model", "app"] }
        }
      },
      "toolResult": {
        "structuredContent": { "message": "Hello from simulation!" }
      }
    }
    ```
  </Step>

  <Step title="Wire up the simulator">
    Create an entrypoint file (like `dev/main.tsx`) where you want to run your simulator:

    ```tsx
    import { StrictMode } from 'react';
    import { createRoot } from 'react-dom/client';
    import { ChatGPTSimulator } from 'sunpeak/chatgpt';
    import { resource } from '../src/resources/example/example-resource';
    import exampleSimulation from '../tests/simulations/example/example-show-simulation.json';
    import '../src/styles/globals.css';

    // Combine simulation with resource
    const simulations = [{
      ...exampleSimulation,
      resource,
      resourceUrl: 'http://localhost:3000/resources/example',
    }];

    createRoot(document.getElementById('root')!).render(
      <StrictMode>
        <ChatGPTSimulator
          simulations={simulations}
          appName="My App"
          appIcon="ðŸŒ„"
        />
      </StrictMode>
    );
    ```

    Add a script to run your simulation dev server (`package.json`):
    ```json
    "scripts": {
      "dev": "vite --port 3000"
    }
    ```

    Run your local development server:

    <Tabs>
      <Tab title="pnpm">
        ```bash
        pnpm dev
        ```
      </Tab>
      <Tab title="npm">
        ```bash
        npm run dev
        ```
      </Tab>
      <Tab title="yarn">
        ```bash
        yarn dev
        ```
      </Tab>
    </Tabs>

    <Warning>
    Only use the simulator in development. For production, export your component directly.
    </Warning>
  </Step>

  <Step title="Wire up the MCP server">
    Create an MCP server file (like `mcp/server.ts`) to serve your built apps to hosts like ChatGPT:

    ```typescript
    import { runMCPServer } from 'sunpeak/mcp';
    import path from 'path';
    import { fileURLToPath } from 'url';
    import { resource } from '../src/resources/example/example-resource';
    import exampleSimulation from '../tests/simulations/example/example-show-simulation.json';

    const __dirname = path.dirname(fileURLToPath(import.meta.url));

    // Combine simulation with resource and distPath for MCP server
    const simulations = [{
      ...exampleSimulation,
      resource,
      distPath: path.resolve(__dirname, '../dist/example/example.html'),
    }];

    runMCPServer({
      name: 'My App',
      version: '0.1.0',
      simulations,
      port: 8000,
    });
    ```

    Add scripts to build and run your MCP server (`package.json`):
    ```json
    "scripts": {
      "build": "vite build",
      "mcp": "tsx mcp/server.ts"
    }
    ```

    Build your app and start the MCP server:

    <Tabs>
      <Tab title="pnpm">
        ```bash
        pnpm build
        pnpm mcp
        ```
      </Tab>
      <Tab title="npm">
        ```bash
        npm run build
        npm run mcp
        ```
      </Tab>
      <Tab title="yarn">
        ```bash
        yarn build
        yarn mcp
        ```
      </Tab>
    </Tabs>

    See [runMCPServer API Reference](/api-reference/simulations/run-mcp-server) for configuration options and connecting to a host via tunnel.
  </Step>
</Steps>

## Need the Full Framework?

Often, it's easier to just copy your existing components into a new project initiated with the sunpeak framework.

The framework comes pre-configured for local and host testing with pre-built components
and automatic discovery of simulations and resources.

See [Quickstart](/quickstart) to get started.
